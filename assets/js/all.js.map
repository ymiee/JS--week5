{"version":3,"sources":["all.js"],"names":["constraints","presence","message","url","schemes","numericality","greaterThan","greaterThanOrEqualTo","lessThanOrEqualTo","data","ticketForm","document","querySelector","ticketInputs","querySelectorAll","ticketName","getElementById","ticketImgUrl","ticketRegion","ticketPrice","ticketNum","ticketRate","ticketDescription","addTicketBtn","searchSelect","searchText","cardList","addEventListener","addTicket","filterArea","renderCard","renderData","cardStr","forEach","item","imgUrl","area","rate","name","description","group","price","innerHTML","e","preventDefault","value","target","newData","filter","length","nextElementSibling","textContent","errors","validate","Object","keys","errItem","ticket","id","Date","now","push","reset","renderSelect","renderArea","selectStr","areaArray","indexOf","init"],"mappings":"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","file":"all.js","sourcesContent":["//  表格驗證 (第七周助教直播)\nconst constraints = {\n  '套票名稱': {\n    presence: {\n      message: '是必填欄位'\n    },\n  },\n  '圖片網址':{\n    presence: {\n      message: '是必填欄位'\n    },\n    url: {\n      schemes: ['http', 'https'],\n      //  或使用 allowDataUrl: true,\n      message: '必須是正確的網址'\n    }\n  },\n  '景點地區':{\n    presence: {\n      message: '是必填欄位'\n    },\n  },\n  '套票金額':{\n    presence: {\n      message: '是必填欄位'\n    },\n    numericality: {\n      greaterThan: 0,\n      message: '必須大於 0'\n    }\n  },\n  '套票組數':{\n    presence: {\n      message: '是必填欄位'\n    },\n    numericality: {\n      greaterThan: 0,\n      message: '必須大於 0'\n    }\n  },\n  '套票星級':{\n    presence: {\n      message: '是必填欄位'\n    },\n    numericality: {\n      greaterThanOrEqualTo: 1,\n      lessThanOrEqualTo: 10,\n      message: '必須符合 1-10 的區間'\n    }\n  },\n  '套票描述':{\n    presence: {\n      message: '是必填欄位'\n    },\n  },\n};\n\n\n//  data\nconst data = [\n  {\n    \"id\": 0,\n    \"name\": \"肥宅心碎賞櫻3日\",\n    \"imgUrl\": \"https://images.unsplash.com/photo-1522383225653-ed111181a951?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1655&q=80\",\n    \"area\": \"高雄\",\n    \"description\": \"賞櫻花最佳去處。肥宅不得不去的超讚景點！\",\n    \"group\": 87,\n    \"price\": 1400,\n    \"rate\": 10\n  },\n  {\n    \"id\": 1,\n    \"name\": \"貓空纜車雙程票\",\n    \"imgUrl\": \"https://images.unsplash.com/photo-1501393152198-34b240415948?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1650&q=80\",\n    \"area\": \"台北\",\n    \"description\": \"乘坐以透明強化玻璃為地板的「貓纜之眼」水晶車廂，享受騰雲駕霧遨遊天際之感\",\n    \"group\": 99,\n    \"price\": 240,\n    \"rate\": 2\n  },\n  {\n    \"id\": 2,\n    \"name\": \"台中谷關溫泉會1日\",\n    \"imgUrl\": \"https://images.unsplash.com/photo-1535530992830-e25d07cfa780?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1650&q=80\",\n    \"area\": \"台中\",\n    \"description\": \"全館客房均提供谷關無色無味之優質碳酸原湯，並取用八仙山之山冷泉供蒞臨貴賓沐浴及飲水使用。\",\n    \"group\": 20,\n    \"price\": 1765,\n    \"rate\": 7\n  }\n];\n\n//  DOM\n//    選取 id 用 getElementById   //  選取 class 用 querySelector\n//    querySelectorAll 把同樣的元素選起來外，會以陣列的方式被傳回\n//      新增表單\nconst ticketForm = document.querySelector('.ticketForm');\n//      驗證\nconst ticketInputs = document.querySelectorAll('input[type=text], input[type=number], .ticketForm select, textarea');\n//      新增表單-input\nconst ticketName = document.getElementById('ticketName');\nconst ticketImgUrl = document.getElementById('ticketImgUrl');\nconst ticketRegion = document.getElementById('ticketRegion');\nconst ticketPrice = document.getElementById('ticketPrice');\nconst ticketNum = document.getElementById('ticketNum');\nconst ticketRate = document.getElementById('ticketRate');\nconst ticketDescription = document.getElementById('ticketDescription');\n//      新增表單按鈕\nconst addTicketBtn = document.querySelector('.addTicketBtn');\n//      搜尋欄\nconst searchSelect = document.querySelector('.searchSelect');\n//      搜尋筆數\nconst searchText = document.querySelector('.searchText');\n//      套票卡片區\nconst cardList = document.querySelector('.cardList');\n\n\n//  監聽\n//      監聽點擊新增表單按鈕\naddTicketBtn.addEventListener('click', addTicket);\n//      監聽改選搜尋欄內容\nsearchSelect.addEventListener('change', filterArea);\n\n\n//  渲染卡片\nfunction renderCard(renderData) {\n  //  預設資料\n  let cardStr = '';\n\n  //  把資料迴圈產生卡片內容\n  renderData.forEach( (item) => {\n    cardStr += `\n      <li class=\"col\">\n        <a class=\"card h-100 shadow\" href=\"#\">\n          <div class=\"cardImg position-relative\" style=\"background-image: url(${item.imgUrl})\">                 \n            <div class=\"position-absolute top-0 start-0 translate-middle-y bg-primary-light px-9 py-3 text-white fs-7\">${item.area}</div>\n            <div class=\"position-absolute top-100 start-0 translate-middle-y bg-primary px-3 py-2 text-center text-white\">${item.rate}</div>          \n          </div>\n          <div class=\"card-body\">\n            <h3 class=\"card-title border-bottom border-primary border-2 fs-5 fw-bolder\">\n              ${item.name}\n            </h3>\n            <p class=\"cardDescription mb-15 text-secondary-light lh-lg\">\n              ${item.description}\n            </p>\n            <div class=\"d-flex justify-content-between align-items-center text-primary fw-bolder\">\n              <p >\n                <i class=\"bi bi-exclamation-circle-fill\"></i>\n                剩下最後 ${item.group} 組\n              </p>\n              <p class=\"d-flex justify-content-between align-items-center\">\n                <span class=\"me-3 fw-bold\">TWD</span>\n                <span class=\"fs-3\">$${item.price}</span>\n              </p>\n            </div>\n          </div>\n        </a>\n      </li>\n    `;\n  });\n\n  // 渲染到卡片列表\n  cardList.innerHTML = cardStr;\n};\n\n\n//  篩選地區\nfunction filterArea(e) {\n  //  取消事件的預設行為\n  e.preventDefault();\n  //  取得篩選地區\n  const value = e.target.value;\n  //  預設資料\n  let newData = [];\n  \n  //  判斷篩選區域\n  if (value == '') {\n    newData = data;\n  } else {\n    newData = data.filter( (item) => {\n      return item.area == value;\n    });\n    //  newData = data.filter(item => item.area == value); => 簡寫\n  }\n\n  //  顯示本次搜尋筆數\n  searchText.innerHTML = `本次搜尋共 ${newData.length} 筆資料`;\n  \n  // 渲染卡片\n  renderCard(newData);\n};\n\n\n//  新增卡片\nfunction addTicket(e) {\n  //  取消事件的預設行為\n  e.preventDefault();\n\n  // 清空表格錯誤訊息\n  ticketInputs.forEach( (item) => {  \n    // item 為表格，item.nextElementSibling 是表格下方的 <small>\n    item.nextElementSibling.textContent = '';\n  })\n\n  // 驗證表單\n  const errors = validate(ticketForm, constraints);\n\n  // 如果驗證錯誤*\n  if (errors) {\n    // 渲染錯誤訊息\n    // Object.keys() => 取得物件所有屬性，並組成陣列\n    Object.keys(errors).forEach( (errItem) => {\n      document.querySelector(`.${errItem}`).textContent = errors[errItem];\n    })\n  } else {\n    // 取得新卡片資料\n    const ticket = {\n      id: Date.now(),   //取得目前時間(毫秒) 時間戳 timestamp\n      name: ticketName.value,\n      imgUrl: ticketImgUrl.value,\n      area: ticketRegion.value,\n      description: ticketDescription.value,\n      group: ticketNum.value,\n      price: ticketPrice.value,\n      rate: ticketRate.value,\n    };\n\n    // 把新資料加入 data 中\n    data.push(ticket);\n\n    // 渲染卡片\n    renderCard(data);\n\n    // 清空表格\n    ticketForm.reset();\n  }\n};\n\n\n  \n//  //  額外東西\n// 渲染下拉地區選單\nfunction renderSelect(renderArea) {\n  // 預設資料\n  let selectStr = '<option value=\"\" disabled selected hidden>地區搜尋</option><option value=\"\">全部地區</option>';\n  const areaArray = [];\n\n  // 取得不重複地區\n  renderArea.forEach( (item) => {\n    if (areaArray.indexOf(item.area) == -1) {\n      areaArray.push(item.area);\n    }\n  })\n\n  // 把資料迴圈產生選單內容\n  areaArray.forEach( (item) => {\n    selectStr += `\n      <option value=\"${item}\">${item}</option>\n    `;\n  })\n\n  // 渲染到下拉選單\n  searchSelect.innerHTML = selectStr;\n};\n\n\n//  初始化\nfunction init() {\n  //  渲染下拉地區選單\n  renderSelect(data);\n  //  渲染卡片\n  renderCard(data);\n};\n\ninit();"]}